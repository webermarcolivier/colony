\section{GraphicsCellODE Class Reference}
\label{classGraphicsCellODE}\index{GraphicsCellODE@{GraphicsCellODE}}
Cell in the Qt graphics framework with ODE object definition.  


{\tt \#include $<$GraphicsCellODE.h$>$}

Inheritance diagram for GraphicsCellODE::\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classGraphicsCellODE}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{CompactItemize}
\item 
{\bf GraphicsCellODE} (int cellIndex, QGraphicsItem $\ast$parent, {\bf GraphicsCellScene} $\ast$colonyScene, dWorldID world, dSpaceID space)
\item 
{\bf $\sim$GraphicsCellODE} ()
\item 
virtual void {\bf setPos} (qreal x, qreal y)
\begin{CompactList}\small\item\em Overloaded version: set the position of both \doxyref{GraphicsCell}{p.}{classGraphicsCell} object and ODE object, warning: coordinates in argument should be in ODE (normal) system. \item\end{CompactList}\item 
void {\bf setAngle} (double angle)
\begin{CompactList}\small\item\em Set the angle of both \doxyref{GraphicsCell}{p.}{classGraphicsCell} and ODE objects. \item\end{CompactList}\item 
void {\bf setCellLength} (double length)
\begin{CompactList}\small\item\em Set the cell length of both \doxyref{GraphicsCell}{p.}{classGraphicsCell} and ODE objects. \item\end{CompactList}\item 
void {\bf duplicateCell} ({\bf GraphicsCell} $\ast$newCell, double cellLength0)
\begin{CompactList}\small\item\em Duplicate cell and write the daughter cell in the newCell pointer. \item\end{CompactList}\item 
dWorldID {\bf ODE\_\-getWorld} () const 
\item 
dSpaceID {\bf ODE\_\-getSpace} () const 
\item 
void {\bf ODE\_\-createCell} (dWorldID world, dSpaceID space, dReal radius, dReal length, dReal angle)
\begin{CompactList}\small\item\em Create the ODE cell object. \item\end{CompactList}\item 
void {\bf ODE\_\-render} () const 
\begin{CompactList}\small\item\em Get the translation and rotation transformation from the ODE object and adapt it to the openGL system, then call \doxyref{ODE\_\-renderInLocalFrame()}{p.}{classGraphicsCellODE_24341eb02690ed5ab5613af71259cf28}. \item\end{CompactList}\item 
TinyVector$<$ double, 2 $>$ {\bf ODE\_\-getPosition} () const 
\item 
double {\bf ODE\_\-getAngle} () const 
\begin{CompactList}\small\item\em Compute the angle of the cell orientation in the xy plane. \item\end{CompactList}\item 
void {\bf ODE\_\-AlignToZAxis} ()
\begin{CompactList}\small\item\em Correct the angular velocity and rotation matrix to verify the xy plane constrain. \item\end{CompactList}\item 
void {\bf ODE\_\-updateODECellLength} ()
\begin{CompactList}\small\item\em Update the ODE cell length from the \doxyref{GraphicsCell}{p.}{classGraphicsCell} object length. \item\end{CompactList}\item 
dBodyID {\bf ODE\_\-getBody} () const 
\end{CompactItemize}
\subsection*{Protected Member Functions}
\begin{CompactItemize}
\item 
void {\bf ODE\_\-renderInLocalFrame} () const 
\begin{CompactList}\small\item\em Draw the cell (capped cylinder) in the openGL framework in the local frame of the object. \item\end{CompactList}\end{CompactItemize}
\subsection*{Private Attributes}
\begin{CompactItemize}
\item 
dWorldID {\bf ODE\_\-world\_\-}
\item 
dSpaceID {\bf ODE\_\-space\_\-}
\item 
dBodyID {\bf ODE\_\-body\_\-}
\begin{CompactList}\small\item\em ODE body (mass, inertia). \item\end{CompactList}\item 
dGeomID {\bf ODE\_\-geom\_\-}
\begin{CompactList}\small\item\em ODE geometry (shape). \item\end{CompactList}\item 
unsigned char {\bf ODE\_\-color\_\-} [3]
\item 
GLUquadric $\ast$ {\bf ODE\_\-cylinder\_\-}
\item 
dJointID {\bf ODE\_\-planeJointID\_\-}
\begin{CompactList}\small\item\em A plane joint for restricting the cells movement to the xy plane. \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
Cell in the Qt graphics framework with ODE object definition. 

\subsection{Constructor \& Destructor Documentation}
\index{GraphicsCellODE@{GraphicsCellODE}!GraphicsCellODE@{GraphicsCellODE}}
\index{GraphicsCellODE@{GraphicsCellODE}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}GraphicsCellODE::GraphicsCellODE (int {\em cellIndex}, \/  QGraphicsItem $\ast$ {\em parent}, \/  {\bf GraphicsCellScene} $\ast$ {\em colonyScene}, \/  dWorldID {\em world}, \/  dSpaceID {\em space})}\label{classGraphicsCellODE_62d06b9e47e841633b9a0c7eafd26f75}


\index{GraphicsCellODE@{GraphicsCellODE}!$\sim$GraphicsCellODE@{$\sim$GraphicsCellODE}}
\index{$\sim$GraphicsCellODE@{$\sim$GraphicsCellODE}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}GraphicsCellODE::$\sim$GraphicsCellODE ()}\label{classGraphicsCellODE_77528d47f270929cc50f75226e36df5d}




\subsection{Member Function Documentation}
\index{GraphicsCellODE@{GraphicsCellODE}!setPos@{setPos}}
\index{setPos@{setPos}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void GraphicsCellODE::setPos (qreal {\em x}, \/  qreal {\em y})\hspace{0.3cm}{\tt  [virtual]}}\label{classGraphicsCellODE_679b35caa5626c64b4c47ca22a1c8306}


Overloaded version: set the position of both \doxyref{GraphicsCell}{p.}{classGraphicsCell} object and ODE object, warning: coordinates in argument should be in ODE (normal) system. 

Remark: method is private in order to prevent confusion with the different coordinate system. \doxyref{Cell}{p.}{classCell} position can only be changed from the \doxyref{GraphicsCellScene}{p.}{classGraphicsCellScene} class. 

\begin{itemize}
\item Set the \doxyref{GraphicsCell}{p.}{classGraphicsCell} position.\end{itemize}


\begin{itemize}
\item Set the ODE object position. \end{itemize}


Reimplemented from {\bf GraphicsCell} \doxyref{}{p.}{classGraphicsCell_665ceebd7816eaae544dcc3d5b0e814c}.\index{GraphicsCellODE@{GraphicsCellODE}!setAngle@{setAngle}}
\index{setAngle@{setAngle}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void GraphicsCellODE::setAngle (double {\em angle})\hspace{0.3cm}{\tt  [virtual]}}\label{classGraphicsCellODE_f60f24d9908b83e02c45221a2b55c0d7}


Set the angle of both \doxyref{GraphicsCell}{p.}{classGraphicsCell} and ODE objects. 



\begin{itemize}
\item Set angle of \doxyref{GraphicsCell}{p.}{classGraphicsCell} object.\end{itemize}


\begin{itemize}
\item Set the rotation matrix R corresponding to the orientation defined by the angle parameter.\end{itemize}


\begin{itemize}
\item The axis of rotation is in the xy plane and is perpendicular to the cell orientation. The angle of rotation is 90 degrees. \end{itemize}


Reimplemented from {\bf GraphicsCell} \doxyref{}{p.}{classGraphicsCell_721cb7956d182f0b3a811cdbaafd4987}.\index{GraphicsCellODE@{GraphicsCellODE}!setCellLength@{setCellLength}}
\index{setCellLength@{setCellLength}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void GraphicsCellODE::setCellLength (double {\em length})\hspace{0.3cm}{\tt  [virtual]}}\label{classGraphicsCellODE_56d13a27201f2ed4629ec1b286e3ff22}


Set the cell length of both \doxyref{GraphicsCell}{p.}{classGraphicsCell} and ODE objects. 

This method destroys and re-create a ODE cell object. 

\begin{itemize}
\item Set the cell length of \doxyref{GraphicsCell}{p.}{classGraphicsCell} object.\end{itemize}


\begin{itemize}
\item Get body position and orientation.\end{itemize}


\begin{itemize}
\item Get the cell height from the \doxyref{GraphicsCell}{p.}{classGraphicsCell} object.\end{itemize}


\begin{itemize}
\item Initiate geometry (object shape).\end{itemize}


\begin{itemize}
\item Initiate body (mass, inertia).\end{itemize}


\begin{itemize}
\item Associate body and geometry.\end{itemize}


\begin{itemize}
\item Set geometry and body position to the same position as before.\end{itemize}


\begin{itemize}
\item Set geometry and body rotation to the same rotation as before.\end{itemize}


\begin{itemize}
\item Restrict movement to the plane. \end{itemize}


Reimplemented from {\bf GraphicsCell} \doxyref{}{p.}{classGraphicsCell_2f7044b1fd970bd201c01e01d0f604c8}.\index{GraphicsCellODE@{GraphicsCellODE}!duplicateCell@{duplicateCell}}
\index{duplicateCell@{duplicateCell}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void GraphicsCellODE::duplicateCell ({\bf GraphicsCell} $\ast$ {\em newCell}, \/  double {\em cellLength0})}\label{classGraphicsCellODE_9f203c1854622dbf36a90f7193d2ea1e}


Duplicate cell and write the daughter cell in the newCell pointer. 

Allocation of the new cell is not managed by this method. Daughter cell should be allocated before calling this method and its pointer passed as argument. In addition to the method from \doxyref{GraphicsCell}{p.}{classGraphicsCell}, it duplicates the ODE cell object. 

\begin{itemize}
\item Duplicate the cell with method from \doxyref{GraphicsCell}{p.}{classGraphicsCell}.\end{itemize}


\begin{itemize}
\item Create the new ODE cell object of the daughter cell.\end{itemize}


\begin{itemize}
\item Update the cell length of the mother cell.\end{itemize}


\begin{itemize}
\item Set the ODE position of both cells to their GraphicsItem position.\begin{itemize}
\item Remark: Take care of conversion between GraphicsScene and ODE coordinates!\end{itemize}
\end{itemize}


\begin{itemize}
\item Set the position of the mother cell.\end{itemize}


\begin{itemize}
\item Set the position of the daughter cell. \end{itemize}


Reimplemented from {\bf GraphicsCell} \doxyref{}{p.}{classGraphicsCell_e2fe453027f851d92ba47b7444075ff9}.\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-getWorld@{ODE\_\-getWorld}}
\index{ODE\_\-getWorld@{ODE\_\-getWorld}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}dWorldID GraphicsCellODE::ODE\_\-getWorld () const}\label{classGraphicsCellODE_8d1548bea5c61d3c69113b7b41e72c09}


\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-getSpace@{ODE\_\-getSpace}}
\index{ODE\_\-getSpace@{ODE\_\-getSpace}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}dSpaceID GraphicsCellODE::ODE\_\-getSpace () const}\label{classGraphicsCellODE_20944162cd4d47827caa9461334ed156}


\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-createCell@{ODE\_\-createCell}}
\index{ODE\_\-createCell@{ODE\_\-createCell}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void GraphicsCellODE::ODE\_\-createCell (dWorldID {\em world}, \/  dSpaceID {\em space}, \/  dReal {\em radius}, \/  dReal {\em length}, \/  dReal {\em angle})}\label{classGraphicsCellODE_083e0f9483c904bf08eb783ce51d36d9}


Create the ODE cell object. 



\begin{itemize}
\item Set the ODE world and space.\end{itemize}


\begin{itemize}
\item Initiate geometry (object shape).\begin{itemize}
\item The geometry is set to a capped cylinder (radius and length).\end{itemize}
\end{itemize}


\begin{itemize}
\item Initiate body (mass, inertia).\end{itemize}


\begin{itemize}
\item The body is set to a capped cylinder with constant density and total mass of 1.0.\end{itemize}


\begin{itemize}
\item Associate body and geometry.\end{itemize}


\begin{itemize}
\item Rotate object.\end{itemize}


\begin{itemize}
\item The axis of rotation is in the xy plane and is perpendicular to the cell orientation. The angle of rotation is 90 degrees.\end{itemize}


\begin{itemize}
\item Restrict movement of the object to the xy plane.\end{itemize}


\begin{itemize}
\item Set a random color.\end{itemize}


\begin{itemize}
\item Initiate the openGL cylinder (quadric pointer). \end{itemize}
\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-render@{ODE\_\-render}}
\index{ODE\_\-render@{ODE\_\-render}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void GraphicsCellODE::ODE\_\-render () const}\label{classGraphicsCellODE_1195581746b06693780f9bb7ebad4d27}


Get the translation and rotation transformation from the ODE object and adapt it to the openGL system, then call \doxyref{ODE\_\-renderInLocalFrame()}{p.}{classGraphicsCellODE_24341eb02690ed5ab5613af71259cf28}. 

\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-getPosition@{ODE\_\-getPosition}}
\index{ODE\_\-getPosition@{ODE\_\-getPosition}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}TinyVector$<$ double, 2 $>$ GraphicsCellODE::ODE\_\-getPosition () const}\label{classGraphicsCellODE_bce436d2f0e3f366452c5782fff95783}


\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-getAngle@{ODE\_\-getAngle}}
\index{ODE\_\-getAngle@{ODE\_\-getAngle}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}double GraphicsCellODE::ODE\_\-getAngle () const}\label{classGraphicsCellODE_2309e365db9bd3930255a3136eb0275e}


Compute the angle of the cell orientation in the xy plane. 



\begin{itemize}
\item Get the quaternion matrix of the ODE geometry.\end{itemize}


\begin{itemize}
\item Remark: a quaternion is equal to (cos(alpha/2),sin(alpha/2)$\ast$u), where u is a unit vector of the rotation axis.\begin{itemize}
\item Remark: the rotation axis should already be in the xy plane and the rotation angle should be 90 degrees.\end{itemize}
\end{itemize}


\begin{itemize}
\item Calculate the orientation of the rotation axis in the xy plane, Euler psi angle.\end{itemize}


\begin{itemize}
\item The orientation of the cell is perpendicular to the rotation axis.\end{itemize}


\begin{itemize}
\item Transform from radians to degrees. \end{itemize}
\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-AlignToZAxis@{ODE\_\-AlignToZAxis}}
\index{ODE\_\-AlignToZAxis@{ODE\_\-AlignToZAxis}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void GraphicsCellODE::ODE\_\-AlignToZAxis ()}\label{classGraphicsCellODE_07dd8b0ca141951912e3371d60b36be7}


Correct the angular velocity and rotation matrix to verify the xy plane constrain. 

\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-updateODECellLength@{ODE\_\-updateODECellLength}}
\index{ODE\_\-updateODECellLength@{ODE\_\-updateODECellLength}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void GraphicsCellODE::ODE\_\-updateODECellLength ()}\label{classGraphicsCellODE_049af5e1ef9d6bad0d0e0acc375f09bf}


Update the ODE cell length from the \doxyref{GraphicsCell}{p.}{classGraphicsCell} object length. 

This method destroys and re-create a ODE cell object (it seems the only way to do it). 

\begin{itemize}
\item Get the cell length from the cellLength\_\- member of \doxyref{GraphicsCell}{p.}{classGraphicsCell} (updated in the simulation).\end{itemize}


\begin{itemize}
\item Set the cell length. \end{itemize}
\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-getBody@{ODE\_\-getBody}}
\index{ODE\_\-getBody@{ODE\_\-getBody}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}dBodyID GraphicsCellODE::ODE\_\-getBody () const}\label{classGraphicsCellODE_27a402cd4fee9a4eb5bb82be9ec5aaa7}


\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-renderInLocalFrame@{ODE\_\-renderInLocalFrame}}
\index{ODE\_\-renderInLocalFrame@{ODE\_\-renderInLocalFrame}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void GraphicsCellODE::ODE\_\-renderInLocalFrame () const\hspace{0.3cm}{\tt  [protected]}}\label{classGraphicsCellODE_24341eb02690ed5ab5613af71259cf28}


Draw the cell (capped cylinder) in the openGL framework in the local frame of the object. 

The method \doxyref{ODE\_\-render()}{p.}{classGraphicsCellODE_1195581746b06693780f9bb7ebad4d27} takes care of rotating and translating the frame in the global openGL scene. 

\subsection{Member Data Documentation}
\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-world\_\-@{ODE\_\-world\_\-}}
\index{ODE\_\-world\_\-@{ODE\_\-world\_\-}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}dWorldID {\bf GraphicsCellODE::ODE\_\-world\_\-}\hspace{0.3cm}{\tt  [private]}}\label{classGraphicsCellODE_56f1a021cccabc1265621e70b0f853af}


\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-space\_\-@{ODE\_\-space\_\-}}
\index{ODE\_\-space\_\-@{ODE\_\-space\_\-}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}dSpaceID {\bf GraphicsCellODE::ODE\_\-space\_\-}\hspace{0.3cm}{\tt  [private]}}\label{classGraphicsCellODE_83ac40e9cd29a4ec7684456f2f426404}


\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-body\_\-@{ODE\_\-body\_\-}}
\index{ODE\_\-body\_\-@{ODE\_\-body\_\-}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}dBodyID {\bf GraphicsCellODE::ODE\_\-body\_\-}\hspace{0.3cm}{\tt  [private]}}\label{classGraphicsCellODE_5a4934dbe7784f5eb288ac35695db3b1}


ODE body (mass, inertia). 

\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-geom\_\-@{ODE\_\-geom\_\-}}
\index{ODE\_\-geom\_\-@{ODE\_\-geom\_\-}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}dGeomID {\bf GraphicsCellODE::ODE\_\-geom\_\-}\hspace{0.3cm}{\tt  [private]}}\label{classGraphicsCellODE_405ac4da90fb52ce18b9235fdd2fbbd9}


ODE geometry (shape). 

\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-color\_\-@{ODE\_\-color\_\-}}
\index{ODE\_\-color\_\-@{ODE\_\-color\_\-}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}unsigned char {\bf GraphicsCellODE::ODE\_\-color\_\-}[3]\hspace{0.3cm}{\tt  [private]}}\label{classGraphicsCellODE_b99d5469e8ac2ae8b2b8597b95efe361}


\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-cylinder\_\-@{ODE\_\-cylinder\_\-}}
\index{ODE\_\-cylinder\_\-@{ODE\_\-cylinder\_\-}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}GLUquadric$\ast$ {\bf GraphicsCellODE::ODE\_\-cylinder\_\-}\hspace{0.3cm}{\tt  [private]}}\label{classGraphicsCellODE_c36ae2dea46c862d8f5c2e39a7128827}


\index{GraphicsCellODE@{GraphicsCellODE}!ODE\_\-planeJointID\_\-@{ODE\_\-planeJointID\_\-}}
\index{ODE\_\-planeJointID\_\-@{ODE\_\-planeJointID\_\-}!GraphicsCellODE@{GraphicsCellODE}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}dJointID {\bf GraphicsCellODE::ODE\_\-planeJointID\_\-}\hspace{0.3cm}{\tt  [private]}}\label{classGraphicsCellODE_5121888b61b79cba23bfc09bc94a724e}


A plane joint for restricting the cells movement to the xy plane. 



The documentation for this class was generated from the following files:\begin{CompactItemize}
\item 
DATA/PROGS/COLONY/{\bf GraphicsCellODE.h}\item 
DATA/PROGS/COLONY/{\bf GraphicsCellODE.cpp}\end{CompactItemize}
